<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تفاصيل العمل - My Portfolio</title>
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css">
</head>
<body class="light-mode rtl">

    <a href="#main-content" class="skip-link" data-lang-key="skip_link">تخطي إلى المحتوى الرئيسي</a>

    <header class="site-header">
        <div class="logo">
            <a href="../index.html">
                <img src="../images/logo.png" alt="شعار Fennec Visionary" loading="lazy">
            </a>
        </div>
        <nav class="main-nav" aria-label="قائمة التصفح الرئيسية">
            <ul role="list">
                <li role="listitem"><a href="../index.html#services" data-lang-key="nav_services">خدماتي</a></li>
                <li role="listitem"><a href="../index.html#tools" data-lang-key="nav_tools">أدواتي</a></li>
                <li role="listitem"><a href="../index.html#works" data-lang-key="nav_works">أعمالي</a></li>
                <li role="listitem"><a href="../index.html#contact" data-lang-key="nav_contact">تواصل معي</a></li>
            </ul>
        </nav>
        <div class="header-controls">
            <select id="language-select" aria-label="اختر اللغة">
                <option value="en">EN</option>
                <option value="ar" selected>AR</option>
                <option value="fr">FR</option>
            </select>
            <button id="mode-toggle" aria-label="تبديل الوضع الداكن">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <div class="search-container">
        <input type="text" id="searchInput" placeholder="ابحث عن عمل..." aria-label="بحث في الأعمال">
        <button id="searchButton" aria-label="بحث"><i class="fas fa-search"></i></button>
    </div>

    <main id="main-content">
        <div class="work-details" data-aos="fade-up">
            <h1 id="work-title"></h1>
            <p id="work-details-text"></p>

            <div id="work-gallery" class="work-gallery slider-container">
                <div class="slides-wrapper"></div>
                <div class="dots-container"></div>
            </div>

            <div class="tags-container"></div>

            <a href="../index.html" class="back-to-works">العودة إلى الأعمال</a>
        </div>

        <!-- صندوق تعليقات فيسبوك -->
        <div id="fb-root"></div>
        <div class="fb-comments"
             data-href="https://fennecvisionary.github.io/portfolio/works/work.html"
             data-width="100%"
             data-numposts="5"></div>
    </main>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>

    <script>
        const allWorks = [
            { id: "work1", title: "تصميم شعار رقم 1", mainImage: "images/work1/1.jpg", galleryImages: ["images/work1/1.jpg", "images/work1/2.jpg", "images/work1/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم شعار تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["شعارات", "هوية بصرية", "تصميم"] },
            { id: "work2", title: "تصميم تغليف رقم 2", mainImage: "images/work2/1.jpg", galleryImages: ["images/work2/1.jpg", "images/work2/2.jpg", "images/work2/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم تغليف تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["تغليف", "منتجات", "طباعة"] },
            { id: "work3", title: "تصميم بطاقة عمل رقم 3", mainImage: "images/work3/1.jpg", galleryImages: ["images/work3/1.jpg", "images/work3/2.jpg", "images/work3/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم بطاقة عمل تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["بطاقات عمل", "هوية تجارية", "طباعة"] },
            { id: "work4", title: "تصميم مواقع رقم 4", mainImage: "images/work4/1.jpg", galleryImages: ["images/work4/1.jpg", "images/work4/2.jpg", "images/work4/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم مواقع تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["مواقع ويب", "UI/UX", "تطوير"] },
            { id: "work5", title: "تصميم فلاير رقم 5", mainImage: "images/work5/1.jpg", galleryImages: ["images/work5/1.jpg", "images/work5/2.jpg", "images/work5/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم فلاير تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["فلاير", "إعلانات", "تسويق"] },
            { id: "work6", title: "تصميم تي شيرت رقم 6", mainImage: "images/work6/1.jpg", galleryImages: ["images/work6/1.jpg", "images/work6/2.jpg", "images/work6/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم تي شيرت تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["أزياء", "رسوم", "طباعة"] },
            { id: "work7", title: "تصميم رسم رقم 7", mainImage: "images/work7/1.jpg", galleryImages: ["images/work7/1.jpg", "images/work7/2.jpg", "images/work7/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم رسم تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["رسوم", "فن رقمي", "فيكتور"] },
            { id: "work8", title: "تصميم هوية بصرية رقم 8", mainImage: "images/work8/1.jpg", galleryImages: ["images/work8/1.jpg", "images/work8/2.jpg", "images/work8/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم هوية بصرية تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["هوية بصرية", "شعارات", "تصميم"] },
            { id: "work9", title: "تصميم شعار رقم 9", mainImage: "images/work9/1.jpg", galleryImages: ["images/work9/1.jpg", "images/work9/2.jpg", "images/work9/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم شعار تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["شعارات", "تصميم", "هوية تجارية"] },
            { id: "work10", title: "تصميم تغليف رقم 10", mainImage: "images/work10/1.jpg", galleryImages: ["images/work10/1.jpg", "images/work10/2.jpg", "images/work10/3.jpg"], details: "هذا العمل هو مثال رائع لتصميم تغليف تم إنشاؤه باستخدام أحدث تقنيات التصميم.", tags: ["تغليف", "منتجات", "طباعة"] }
        ];

        const urlParams = new URLSearchParams(window.location.search);
        const workId = urlParams.get('id');

        const work = allWorks.find(w => w.id === workId);

        if (work) {
            document.title = `${work.title} - My Portfolio`;
            document.getElementById('work-title').textContent = work.title;
            document.getElementById('work-details-text').textContent = work.details;

            const galleryContainer = document.getElementById('work-gallery');
            const slidesWrapper = galleryContainer.querySelector('.slides-wrapper');
            const dotsContainer = galleryContainer.querySelector('.dots-container');

            slidesWrapper.innerHTML = '';
            dotsContainer.innerHTML = '';

            let currentIndex = 0;

            work.galleryImages.forEach((imageSrc, index) => {
                const fullPath = `../${imageSrc}`;

                const img = document.createElement('img');
                img.src = fullPath;
                img.alt = `${work.title} - صورة ${index + 1}`;
                img.classList.add('slide-image');

                const a = document.createElement('a');
                a.href = fullPath;
                a.setAttribute('data-lightbox', 'work-gallery');
                a.setAttribute('data-title', `${work.title} - صورة ${index + 1}`);
                a.appendChild(img);

                slidesWrapper.appendChild(a);

                const dot = document.createElement('span');
                dot.classList.add('dot');
                dot.addEventListener('click', () => {
                    showSlide(index);
                });
                dotsContainer.appendChild(dot);
            });

            const tagsContainer = document.querySelector('.tags-container');
            if (tagsContainer) {
                tagsContainer.innerHTML = ''; 
                if (work.tags) {
                    work.tags.forEach(tagName => {
                        const tagLink = document.createElement('a');
                        tagLink.href = "#";
                        tagLink.classList.add('tag-link');
                        tagLink.textContent = tagName;
                        tagsContainer.appendChild(tagLink);
                    });
                }
            }

            function showSlide(index) {
                const slides = slidesWrapper.querySelectorAll('.slide-image');
                const dots = dotsContainer.querySelectorAll('.dot');

                slides.forEach((slide, i) => {
                    slide.style.display = i === index ? 'block' : 'none';
                });

                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });

                currentIndex = index;
            }

            showSlide(0);

            galleryContainer.addEventListener('mouseenter', () => {
                const navRight = document.createElement('span');
                navRight.classList.add('nav-arrow', 'nav-right');
                navRight.innerHTML = '&#10095;';
                navRight.addEventListener('click', () => {
                    const newIndex = (currentIndex + 1) % work.galleryImages.length;
                    showSlide(newIndex);
                });

                const navLeft = document.createElement('span');
                navLeft.classList.add('nav-arrow', 'nav-left');
                navLeft.innerHTML = '&#10094;';
                navLeft.addEventListener('click', () => {
                    const newIndex = (currentIndex - 1 + work.galleryImages.length) % work.galleryImages.length;
                    showSlide(newIndex);
                });

                galleryContainer.appendChild(navRight);
                galleryContainer.appendChild(navLeft);
            });

            galleryContainer.addEventListener('mouseleave', () => {
                const arrows = galleryContainer.querySelectorAll('.nav-arrow');
                arrows.forEach(arrow => arrow.remove());
            });

            // تحديث رابط صندوق التعليقات حسب الصفحة
            const fbComments = document.querySelector(".fb-comments");
            if (fbComments) {
                fbComments.setAttribute("data-href", window.location.href);
            }
        } else {
            document.querySelector('.work-details').innerHTML = '<h1 style="text-align:center;">لم يتم العثور على هذا العمل.</h1>';
        }

        AOS.init();
        lightbox.option({
            'albumLabel': '%1 / %2'
        });
    </script>

    <!-- Facebook SDK script -->
    <script async defer crossorigin="anonymous"
        src="https://connect.facebook.net/ar_AR/sdk.js#xfbml=1&version=v17.0">
    </script>

    <script src="../script.js"></script>
</body>
</html>

